# [openGauss每日一练第 18 天-视图管理](https://www.modb.pro/db/579736)

## 1. 普通视图
视图与基本表不同，是一个虚拟的表。**数据库中仅存放视图的定义，而不存放视图对应的数据**，这些数据仍存放在原来的基本表中。若基本表中的数据发生变化，从视图中查询出的数据也随之改变。从这个意义上讲，视图就像一个**窗口**，透过它可以看到数据库中用户感兴趣的数据及变化。

普通视图在查询中是实时进行计算的。如果建立视图的基表数据很多，使用视图的时候，进行**实时计算视图表示的结果集**，将消耗很大的计算机资源，并且费时很长。

:bulb: **视图感觉就像一个软连接一样，存放的是定义，像一个超链接**
  
## 2. 物化视图
物化视图是相对普通视图而言的。普通视图是虚拟表，而物化视图实际上就是存储SQL执行语句的结果，可以直接使用数据而不用重复执行查询语句，从而提升性能。

如果更新了基表,物化视图将过期。也就是说，基表更新后，物化视图不能反映最新的数据情况。因此**在基表发生变化的时候，需要对物化视图进行更新**

:bulb: **可以用触发器实现**

按照刷新方式分为两种：
- 全量物化视图 
  仅支持对已创建的物化视图进行全量更新，而不支持进行增量更新。

- 增量物化视图
  可以对物化视图增量刷新，需要用户**手动执行语句**完成对物化视图在一段时间内的增量数据刷新。与全量创建物化视图的不同在于目前增量物化视图所支持场景较小。目前物化视图创建语句仅支持基表扫描语句或者UNION ALL语句。

**我的理解**：全量化开销大，对数据重新扫描一遍，增量化开销小，只对新增加的数据扫描


## 3. [pg_views](https://docs.opengauss.org/zh/docs/3.1.0-lite/docs/Developerguide/PG_VIEWS.html)
PG_VIEWS视图提供访问数据库中每个视图的有用信息。
重要字段
- schemaname 视图的模式名
- viewname 视图名
- viewowner 视图的所有者
- definition 视图的定义

## 4. 每日sql语句
```sql
-- 创建视图
creat view view_name as
select * from test;
```

```sql
-- 创建物化视图
creat materialized view view_name as
select * from test1;

-- 更新物化视图
refresh materialized view view_name;
```