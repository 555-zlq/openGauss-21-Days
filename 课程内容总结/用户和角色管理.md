# [openGauss每日一练第 19 天-用户和角色管理](https://www.modb.pro/db/579956)

## 1. 用户
- 使用CREATE USER和ALTER USER可以创建和管理数据库用户。openGauss包含一个或多个已命名数据库用户和角色在openGauss**范围内是共享**的，但是其**数据并不共享**。即用户可以连接任何数据库，但当连接成功后，任何用户都只能访问连接请求里声明的那个数据库。

- 非三权分立下，openGauss用户帐户只能由系统管理员或拥有CREATEROLE属性的安全管理员创建和删除。三权分立时，用户帐户只能由初始用户和安全管理员创建。

- 在用户登录openGauss时会对其进行身份验证。**用户可以拥有数据库和数据库对象（例如表）**，并且可以向用户和角色授予对这些对象的权限以控制谁可以访问哪个对象。除系统管理员外，具有CREATEDB属性的用户可以创建数据库并授予对这些数据库的权限。


## 2. 角色
- 角色是一组用户的集合。**通过GRANT把角色授予用户后，用户即具有了角色的所有权限**。推荐使用角色进行高效权限分配。例如，可以为设计、开发和维护人员创建不同的角色，将角色GRANT给用户后，再向每个角色中的用户授予其工作所需数据的差异权限。**在角色级别授予或撤消权限时，这些更改将作用到角色下的所有成员。**
- openGauss提供了一个隐式定义的拥有**所有角色的组PUBLIC**，所有创建的用户和角色默认拥有PUBLIC所拥有的权限。关于PUBLIC默认拥有的权限请参考GRANT。要撤销或重新授予用户和角色对PUBLIC的权限， **可通过在GRANT和REVOKE指定关键字PUBLIC实现。**

==二者的区别==：使用create user创建的用户与使用create role创建的用户的区别在于，**前者可以直接连接登录数据库**，而使用create role创建的用户不能直接登录到数据库。**必须添加LOGIN权限后，才能登录到数据库管理系统**

## 3. 完全删除一个用户或角色
删除用户和角色，首先需要将用户拥有的数据库对象转移或者删除。


## 4. 每日sql语句
```sql
-- 授予数据库的所有权限
grant all on database testdb to user1;
grant all on database testdb to user2;

```

```sql
-- 授予角色登录权限
alter user user2 login;
```